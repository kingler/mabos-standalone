---
component: e2e_tests
description: Contains end-to-end tests for the MABOS system
main-technologies:
  - Python
  - pytest
  - FastAPI TestClient
conventions:
  - Use pytest for test definitions
  - Simulate real-world scenarios in tests
  - Use meaningful test case names
  - Implement proper setup and teardown procedures
---

# End-to-End Tests Component

This directory contains the end-to-end (E2E) tests for the MABOS system. These tests verify the system's behavior from a user's perspective, ensuring that all components work together correctly.

## Structure

- `__init__.py`: Initialization for the test package
- `test_agent_interaction.py`: E2E tests for agent interactions
- `test_system_integration.py`: E2E tests for overall system integration
- `test_user_workflow.py`: E2E tests for user workflows
- Other test files for specific E2E scenarios...

## Key Responsibilities

1. Testing complete user workflows
2. Verifying system-wide integration
3. Ensuring all components work together correctly
4. Simulating real-world usage scenarios
5. Catching issues that unit tests might miss

## Development Guidelines

- Use pytest for defining and running tests
- Implement tests that cover complete user workflows
- Use meaningful and descriptive names for test functions
- Implement proper setup and teardown procedures to ensure test isolation
- Use FastAPI's TestClient for API-related E2E tests

## Test Implementation

When creating a new E2E test:
- Clearly define the scenario being tested
- Set up the necessary test data and environment
- Simulate user actions and system interactions
- Verify the expected outcomes
- Clean up any resources created during the test

## Test Data Management

- Use fixtures or factory functions to generate test data
- Consider using a separate test database for E2E tests
- Implement proper data cleanup after each test

## Continuous Integration

- Ensure E2E tests are run as part of the CI/CD pipeline
- Consider running E2E tests in a staging environment that closely mimics production

## Usage Example

```python
import pytest
from fastapi.testclient import TestClient
from app.main import app

client = TestClient(app)

def test_create_business_model_workflow():
    # Setup
    user_data = {"username": "testuser", "password": "testpass"}
    model_data = {"name": "Test Model", "description": "A test business model"}
    
    # Create user
    response = client.post("/users/", json=user_data)
    assert response.status_code == 201
    user_id = response.json()["id"]
    
    # Login
    response = client.post("/login/", data=user_data)
    assert response.status_code == 200
    token = response.json()["access_token"]
    
    # Create business model
    headers = {"Authorization": f"Bearer {token}"}
    response = client.post("/business-models/", json=model_data, headers=headers)
    assert response.status_code == 201
    model_id = response.json()["id"]
    
    # Verify model creation
    response = client.get(f"/business-models/{model_id}", headers=headers)
    assert response.status_code == 200
    assert response.json()["name"] == model_data["name"]
    
    # Cleanup
    client.delete(f"/users/{user_id}", headers=headers)
    client.delete(f"/business-models/{model_id}", headers=headers)
```

Remember to update the `README.md` in this directory when adding new E2E tests or making significant changes to existing ones.