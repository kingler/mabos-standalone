---
component: unit_tests
description: Contains unit tests for individual components of the MABOS system
main-technologies:
  - Python
  - pytest
conventions:
  - Use pytest for test definitions
  - Focus on testing individual functions and methods
  - Use mocking for external dependencies
  - Aim for high test coverage
---

# Unit Tests Component

This directory contains the unit tests for individual components of the MABOS system. These tests focus on verifying the behavior of specific functions, methods, and classes in isolation.

## Structure

- `__init__.py`: Initialization for the test package
- `test_agents.py`: Unit tests for agent-related functionality
- `test_models.py`: Unit tests for data models
- `test_services.py`: Unit tests for service layer
- `test_utils.py`: Unit tests for utility functions
- Other test files for specific components...

## Key Responsibilities

1. Testing individual functions, methods, and classes
2. Verifying component behavior in isolation
3. Catching bugs and errors at the component level
4. Ensuring code correctness and reliability
5. Facilitating refactoring and code changes

## Development Guidelines

- Use pytest for defining and running tests
- Focus on testing one thing at a time
- Use descriptive names for test functions (e.g., test_function_name_expected_behavior)
- Use mocking to isolate the component being tested
- Aim for high test coverage, but focus on critical and complex parts

## Test Implementation

When creating a new unit test:
- Clearly define what aspect of the component is being tested
- Set up any necessary test data or mocks
- Call the function or method being tested
- Assert the expected outcomes
- Clean up any resources if necessary

## Mocking and Dependency Injection

- Use pytest's monkeypatch or unittest.mock for mocking
- Consider using dependency injection to make components easier to test
- Be cautious when mocking to ensure tests remain meaningful

## Code Coverage

- Use pytest-cov to measure code coverage
- Aim for high coverage, especially in critical parts of the system
- Don't pursue 100% coverage at the expense of meaningful tests

## Usage Example

```python
import pytest
from app.models.agent.agent import Agent
from app.services.agent_service import AgentService

def test_create_agent_with_valid_data():
    # Arrange
    agent_data = {"name": "TestAgent", "type": "BusinessAgent"}
    service = AgentService()
    
    # Act
    agent = service.create_agent(agent_data)
    
    # Assert
    assert isinstance(agent, Agent)
    assert agent.name == "TestAgent"
    assert agent.type == "BusinessAgent"

def test_create_agent_with_invalid_data():
    # Arrange
    invalid_agent_data = {"name": "TestAgent"}  # Missing required 'type'
    service = AgentService()
    
    # Act & Assert
    with pytest.raises(ValueError):
        service.create_agent(invalid_agent_data)
```

Remember to update the `README.md` in this directory when adding new unit tests or making significant changes to existing ones.